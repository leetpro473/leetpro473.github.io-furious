const ICON_FORM_ERROR='<i class="mdi mdi-alert-circle"></i>';const webApp={menu:{toggleMenu(){$('#webApp-header__menu').stop().slideToggle(450,function(){window.dispatchEvent(new CustomEvent('scroll'));});}},modal:{openModal(modal,autoHideLoading=true){$('.webAppModal,.webAppModal__container').hide();$('.webAppModal[modal='+modal+'] .webAppModal__loading').show();$('.webAppModal[modal='+modal+'] .webAppModal__container').show();$('.webAppModal[modal='+modal+']').fadeIn(450,function(){if(autoHideLoading){$('.webAppModal__loading').fadeOut(450);}});},closeModal(){$('.webAppModal').fadeOut(450,function(){$('.webAppModal .webAppForm_error').hide();});}},McStatus:{onInit(){webApp.McStatus.query();},query(){webApp.McStatus.mcstatusV3();webApp.McStatus.mcsrvstatMCPE();setTimeout(webApp.McStatus.query,35000);},mcstatusV3(){$.ajax({type:'GET',url:'https://mcstatus.snowdev.com.br/api/query/v3/'+shop_.CONFIG.serverIP,}).done(function(response){if(response.online){$('.statistics__serverStatus span').text(response.players_online);}});},mcsrvstatMCPE(){$.ajax({type:'GET',url:'https://api.mcsrvstat.us/bedrock/2/'+shop_.CONFIG.serverIP,}).done(function(response){if(response.online){$('.statistics__serverStatus span').text(response.players.online);}});}},cart:{defineProfile(){$('#webApp-boxDefineProfile .webApp-box__loading').fadeIn(200);$.ajax({url:'/api/cart/profile',type:'POST',data:$('#webAppForm-defineProfile').serialize()}).done(function(data){window.location.href='/cart';}).fail(function(data){$('#webAppForm-defineProfile .webAppForm__error').html('* '+data.responseJSON.message);$('#webApp-boxDefineProfile .webApp-box__loading').fadeOut(200);});},applyDiscountCoupon(){$('#webApp-boxCartCoupon .webApp-box__loading').fadeIn(200);$.ajax({url:'/api/cart/applydiscountcoupon',type:'POST',data:$('#webAppForm-cartCoupon').serialize()}).done(function(data){window.location.reload();}).fail(function(data){$('#webAppForm-cartCoupon .webAppForm__error').html('* '+data.responseJSON.message);$('#webApp-boxCartCoupon .webApp-box__loading').fadeOut(200);});},updateAmountToCart(obj){$('#webApp-boxCart .webApp-box__loading').fadeIn(450);$.ajax({url:'/api/cart/update',type:'POST',data:{'product':$(obj).attr('productID'),'amount':$(obj).val()}}).done(function(data){window.location.reload();});},addToCart(product){$('.webApp-boxProduct[product='+product+'] .webApp-boxProduct__loading').fadeIn(450);$('.webApp-boxProduct[product='+product+'] .webApp-boxProduct__buttonAddToCart a').text('Aguarde...');$.ajax({url:'/api/cart/add',type:'POST',data:{'product':product,'quantity':1}}).done(function(data){$('.webApp-boxProduct[product='+product+'] .webApp-boxProduct__loading').fadeOut(450);$('.webAppModal[modal="itemAddedToCart"] .productImage img').attr('src',$('.webApp-boxProduct[product='+product+'] .webApp-boxProduct__logo img').attr('src'));webApp.modal.openModal('itemAddedToCart');setTimeout(function(){$('.webApp-boxProduct[product='+product+'] .webApp-boxProduct__buttonAddToCart a').text('Adicionar ao carrinho');},500);});},addToCartCash(){$('.webAppModal[modal="shopCash"] .webAppModal__loading').show();$.ajax({url:'/api/cart/add',type:'POST',data:{'product':'cash_'+shop_.CONFIG.shopID,'quantity':$('#productCashAmount').val()}}).done(function(data){webApp.modal.closeModal();setTimeout(function(){$('.webAppModal[modal="itemAddedToCart"] .productImage img').attr('src','https://cdn.minecart.com.br/assets/img/cash.png');webApp.modal.openModal('itemAddedToCart');},400);}).fail(function(data){$('.webAppModal[modal="shopCash"] .webAppModal__loading').fadeOut(400);$('.webAppModal[modal="shopCash"] .form-error').text(data.responseJSON.message);});},removeToCart(product){$('#webApp-boxCart .webApp-box__loading').fadeIn(450);$.ajax({url:'/api/cart/remove',type:'POST',data:{'product':product}}).done(function(data){window.location.reload();});},processPayment(e){$('.webAppModal[modal="finishOrder"] .webAppModal__loading').show();$('.webAppModal .webAppForm__error').hide();$.ajax({url:'/api/cart/gotopayment',type:'POST',data:$(e).serialize()}).done(function(data){window.location.href=data.redirect;}).fail(function(data){$('.webAppModal[modal="finishOrder"] .webAppForm__error').text('* '+data.responseJSON.message);$('.webAppModal .webAppForm__error').fadeIn(200);$('.webAppModal[modal="finishOrder"] .webAppModal__loading').fadeOut(400);});},processFormPicPay(){$('.webAppModal[modal="picpay"] .webAppModal__loading').show();$('.webAppModal .webAppForm__error').hide();$.ajax({url:'/api/cart/gotopayment',type:'POST',data:$('#webAppForm-payments__picpay').serialize()}).done(function(data){window.location.href=data.redirect;}).fail(function(data){$('.webAppModal[modal="picpay"] .webAppForm__error').text('* '+data.responseJSON.message);$('.webAppModal .webAppForm__error').fadeIn(200);$('.webAppModal[modal="picpay"] .webAppModal__loading').fadeOut(400);});},processFormPix(){$('.webAppModal[modal="pix"] .webAppModal__loading').show();$('.webAppModal .webAppForm__error').hide();$.ajax({url:'/api/cart/gotopayment',type:'POST',data:$('#webAppForm-payments__pix').serialize()}).done(function(data){window.location.href=data.redirect;}).fail(function(data){$('.webAppModal[modal="pix"] .webAppForm__error').text('* '+data.responseJSON.message);$('.webAppModal .webAppForm__error').fadeIn(200);$('.webAppModal[modal="pix"] .webAppModal__loading').fadeOut(400);});}},server:{shop:{cash:{updateOnChangeCashAmount(){let cashAmount=$("#productCashAmount").val();let cashPrice=$("#Current__cashPrice").text().replace(",","");$("#Current__cashAmount").text(cashAmount);$("#Current__priceCashAmount").text((Math.ceil((parseFloat(cashAmount)*parseFloat(cashPrice))*100)/100).formatMoney(2,".",","));}},prepareProductModal(product){webApp.modal.openModal('shopProduct');$(".webAppModal .loading").show();$.ajax({url:"/api/product/"+product,type:"GET"}).done(function(data){$(".webAppModal .loading").hide();$(".webAppModal[modal=shopProduct] .webAppModal__header .title").text(data.d.name);$(".webAppModal[modal=shopProduct] .webAppModal__main .description").html(data.d.description);});}}},rules:{showPunition(punishment){if($('.webApp-boxRule__punition[punishment='+punishment+']').is(':visible')){$('.webApp-boxRule__punition').stop().fadeOut();}else{$('.webApp-boxRule__punition').hide();$('.webApp-boxRule__punition[punishment='+punishment+']').stop().fadeIn(450);}}},copyServerIP(){let serverAndress_=document.getElementsByClassName('statistics__serverAndress')[0];let wasCopied='<img src="https://cdn.minecart.com.br/assets/img/icons/icon-check.svg"> COPIADO !';if(serverAndress_.innerHTML!=wasCopied){serverAndress_.innerHTML=wasCopied;const element_=document.createElement('textarea');element_.value=shop_.CONFIG.serverIP;element_.setAttribute('readonly','');element_.style.position='absolute';element_.style.left='-9999px';document.body.appendChild(element_);element_.select();document.execCommand('copy');document.body.removeChild(element_);setTimeout(function(){serverAndress_.textContent=shop_.CONFIG.serverIP;},2000);}}}
Number.prototype.formatMoney=function(decPlaces,thouSeparator,decSeparator){var n=this,decPlaces=isNaN(decPlaces=Math.abs(decPlaces))?2:decPlaces,decSeparator=decSeparator==undefined?".":decSeparator,thouSeparator=thouSeparator==undefined?",":thouSeparator,sign=n<0?"-":"",i=parseInt(n=Math.abs(+n||0).toFixed(decPlaces))+"",j=(j=i.length)>3?j%3:0;return sign+(j?i.substr(0,j)+thouSeparator:"")+i.substr(j).replace(/(\d{3})(?=\d)/g,"$1"+thouSeparator)+(decPlaces?decSeparator+Math.abs(n-i).toFixed(decPlaces).slice(2):"");};$('#menuListButton li#buttonDropMenu a').click(function(){$('#menuList').slideToggle(450);});webApp.McStatus.onInit();